<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Title -->
        <title>Admin - Add User</title>
        <!-- Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        <!-- Jquery -->
        <script src="lib/jquery/dist/jquery.js"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.min.js"></script>
    </head>

    <body>
        <!-- Navbar: Dark color & Stick at top of page -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
            <div class="container-fluid">
                <!-- Home button -->
                <a class="navbar-brand" href="UserManagement.html">
                    <!-- Logo image -->
                    <img src="image/logo.png" alt="Logo" height="24"
                        class="d-inline-block align-text-top">
                </a>

                <!-- Collapse button (for responsive) -->
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="AddNewUser.html">Add New</a>
                        </li>
                    </ul>

                    <!-- Search Movie -->
                    <form class="d-flex" role="search">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-outline-light" type="submit">Search</button>
                    </form>
                </div>
            </div>
        </nav>
        <!-- End Navbar -->

        <div class="container-fluid">
            <h2>Add a User <a href="index.html" class="btn btn-sm btn-primary">Back</a></h2>
            <div class="form-group">
                <label for="Id">User ID</label>
                <input type="text" name="" id="id" class="form-control" readonly>
            </div>
            <div class="form-group">
                <label for="startLocation">Email</label>
                <input type="text" name="" id="email" class="form-control">
            </div>
            <div class="form-group">
                <label for="Name">User Name</label>
                <input type="text" name="" id="name" class="form-control">
            </div>
            <div class="form-group">
                <label for="startLocation">Password</label>
                <input type="text" name="" id="password" class="form-control">
            </div>
            <div class="form-group">
                <label for="EndLocation">Role Id</label>
                <select class="custom-select" id="inputGroupSelect01">
                    <option selected>Choose...</option>
                    <option value="1">One</option>
                    <option value="2">Two</option>
                    <option value="3">Three</option>
                </select>
            </div>
            <div class="text-center panel-body">
                <button type="submit" class="btn btn-sm btn-primary" id="AddButton">Add</button>
            </div>
            <div id="resultDiv" style="display: none;">
                <h2>Product Added:</h2>
                <table class="table table-sm table-striped table-bordered m-2">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Email</th>
                            <th>User Name</th>
                            <th>Role Id</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>

        <!-- Bootstrap -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
            crossorigin="anonymous"></script>

        <script type="text/javascript">
            $(document).ready(function () 
            {
                //when submit form
                $("#AddButton").click(function (e) 
                {
                    $.ajax({
                        url: "http://localhost:5000/api/Product",
                        type: "post",
                        contentType: "application/json",
                        data: JSON.stringify({
                            productId: 0,
                            productName: $("#proName").val(),
                            unitPrice: $("#price").val(),
                            unitslnStock: $("#stock").val(),
                            categoryId: $("#category").find(":selected").val()
                        }),
                        success: function (result, status, xhr) 
                        {
                            console.log(result);
                            $("tbody").append($("<tr>"));
                            appendElement = $("tbody tr").last();
                            appendElement.append($("<td>").html(result["productId"]));
                            appendElement.append($("<td>").html(result["productName"]));
                            appendElement.append($("<td>").html(result["unitPrice"]));
                            appendElement.append($("<td>").html(result["unitslnStock"]));
                            appendElement.append($("<td>").html(result["categoryId"]));

                            $("#resultDiv").show();
                        },
                        error: function (xhr, status, error) 
                        {
                            console.log(xhr);
                        }
                    });
                });
            });
        </script>
    </body>
</html>